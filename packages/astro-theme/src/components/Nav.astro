---
import Breadcrumbs from "./Breadcrumbs.astro";
import { generateBreadcrumbs } from "../utils/generateBreadcrumbs.js";
import config from "virtual:theme-config";

const currentPath = Astro.url.pathname;
const pageTitle = Astro.props.title || "Current Page";
// Pass siteName from config to generateBreadcrumbs
const breadcrumbItems = generateBreadcrumbs(currentPath, pageTitle, config.site.name);
const isHome = currentPath === "/";
---

<nav class="header" id="header">
  <div class="nav-content">
    <a href="/" class="logo" id="logo">
      <img
        src={config.logo}
        alt={config.logoAlt}
        width="32"
        height="32"
        style={isHome ? "opacity:0;" : undefined}
        loading="eager"
        decoding="async"
      />
    </a>
    <Breadcrumbs items={breadcrumbItems} />
  </div>
</nav>

<style>
  .header.hidden {
    opacity: 0;
    visibility: hidden;
  }
</style>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const logo = document.getElementById("logo");
    const isHome = window.location.pathname === "/";

    logo?.addEventListener("click", function (e) {
      if (isHome) {
        e.preventDefault();

        window.scrollTo({
          top: 0,
          behavior: "smooth"
        });
      }
    });
  });
</script>
